# FlowKey 智能输入法 - 本地测试指南

## 🎯 概述

FlowKey 是一个运行在 macOS 上的智能输入法应用程序，集成本地 AI 服务，提供划词翻译、智能改写、语音记录等功能。

## 📋 系统要求

- **操作系统**: macOS 14.0 (Sonoma) 或更高版本
- **架构**: Apple Silicon (arm64) 或 Intel
- **Swift 版本**: 6.2 或更高版本
- **内存**: 至少 8GB RAM
- **存储**: 至少 2GB 可用空间

## 🚀 快速启动

### 方法一：使用启动脚本（推荐）

```bash
# 在项目根目录运行
./run_app.sh
```

### 方法二：手动启动

```bash
# 1. 构建应用程序
swift build

# 2. 启动应用程序
./.build/debug/FlowKey
```

### 方法三：后台运行

```bash
# 后台启动应用程序
nohup ./.build/debug/FlowKey > /dev/null 2>&1 &

# 查看进程状态
ps aux | grep FlowKey
```

## 🎮 应用程序界面

### 主界面
- **标题**: FlowKey 智能输入法
- **状态指示器**: 显示应用程序运行状态
- **功能列表**: 展示核心功能特性
- **操作按钮**: 设置、测试、退出

### 设置界面
- **通用设置**: 开机自启动、菜单栏显示、自动更新
- **翻译设置**: 源语言、目标语言配置
- **关于信息**: 版本号、构建时间

## 🔧 核心功能

### 1. 划词翻译
- **功能**: 选中任意文本即可翻译
- **支持语言**: 中英文互译
- **特点**: 本地处理，保护隐私

### 2. 语音识别
- **功能**: 支持语音输入和命令
- **技术**: 基于 Whisper 语音识别
- **应用**: 语音转文字、语音命令

### 3. 智能推荐
- **功能**: 基于上下文的智能建议
- **技术**: 机器学习算法
- **用途**: 提高输入效率

### 4. 知识库管理
- **功能**: 个人知识管理系统
- **特点**: 支持文档导入和搜索
- **应用**: 快速查找和使用知识

### 5. 云同步
- **功能**: iCloud 数据同步
- **特点**: 跨设备数据一致性
- **安全**: 端到端加密

## 📊 当前版本信息

### 版本状态
- **版本**: 1.0.0 (简化测试版)
- **构建类型**: Debug
- **构建时间**: 2025-08-23
- **Swift 版本**: 6.2

### 功能状态
- ✅ **基础界面**: 完整的 macOS 应用界面
- ✅ **设置功能**: 基本设置选项
- ✅ **状态管理**: 应用程序状态管理
- ⚠️ **翻译功能**: 界面已就绪，核心功能待完善
- ⚠️ **语音功能**: 界面已就绪，核心功能待完善
- ⚠️ **AI 功能**: 界面已就绪，核心功能待完善

## 🔍 故障排除

### 常见问题

#### 1. 构建失败
```bash
# 清理构建缓存
rm -rf .build

# 重新构建
swift build
```

#### 2. 应用程序无法启动
```bash
# 检查权限
chmod +x .build/debug/FlowKey

# 检查依赖
swift package show-dependencies
```

#### 3. 应用程序无响应
```bash
# 强制结束进程
pkill -f FlowKey

# 重新启动
./run_app.sh
```

### 日志查看

```bash
# 查看应用程序输出
tail -f nohup.out

# 查看系统日志
log show --predicate 'process == "FlowKey"' --info --debug
```

## 🛠️ 开发说明

### 项目结构
```
FlowKey/
├── Sources/
│   ├── FlowKey/
│   │   ├── App/
│   │   │   ├── FlowKeyApp.swift (完整版)
│   │   │   └── SimpleFlowKeyApp.swift (简化版)
│   │   ├── Services/ (服务层)
│   │   ├── Models/ (数据模型)
│   │   └── Views/ (界面组件)
│   └── FlowKeyTests/ (测试代码)
├── .build/ (构建产物)
├── Package.swift (项目配置)
└── run_app.sh (启动脚本)
```

### 构建配置

#### 完整版本（需要修复编译错误）
```bash
# 使用完整版 Package.swift
cp Package-Original.swift Package.swift
swift build
```

#### 简化版本（可立即运行）
```bash
# 使用简化版 Package.swift
cp Package-Simple.swift Package.swift
swift build
```

### 测试运行

```bash
# 运行单元测试
swift test

# 运行特定测试
swift test --filter TranslationServiceTests
```

## 📝 注意事项

### 当前限制
1. **简化版本**: 当前运行的是简化测试版本
2. **功能限制**: 部分高级功能尚未实现
3. **性能**: 未进行性能优化
4. **兼容性**: 仅支持 macOS 14.0+

### 安全提醒
1. **权限管理**: 应用程序需要适当的系统权限
2. **数据安全**: 本地处理，保护用户隐私
3. **网络访问**: 部分功能需要网络连接

### 开发建议
1. **逐步完善**: 先修复编译错误，再增强功能
2. **测试驱动**: 添加充分的测试用例
3. **用户体验**: 优化界面和交互体验
4. **性能优化**: 提高应用程序性能

## 🔄 更新说明

### 完整版本开发计划
1. **修复编译错误**: 解决所有编译问题
2. **实现核心功能**: 完善翻译、语音、AI功能
3. **优化性能**: 提高运行效率
4. **完善测试**: 增加测试覆盖率
5. **发布准备**: 准备正式版本

### 版本历史
- **v1.0.0-test**: 简化测试版本，基础界面和设置
- **v1.0.0-full**: 完整功能版本（开发中）

## 📞 技术支持

### 获取帮助
- **项目文档**: 查看 `README.md` 和 `plan.md`
- **测试报告**: 查看 `TEST_REPORT.md`
- **问题报告**: 提交 Issue 到项目仓库

### 开发者信息
- **开发语言**: Swift
- **UI 框架**: SwiftUI
- **构建工具**: Swift Package Manager
- **目标平台**: macOS

---

**最后更新**: 2025-08-23  
**文档版本**: 1.0  
**适用版本**: v1.0.0-test