[English](README.md) | [简体中文](README.zh-CN.md) | [Español](README.es.md) | [हिन्दी](README.hi.md) | [العربية](README.ar.md)

# FlowKey — 智能输入法 for macOS

一款尖端的 macOS 输入法应用程序，集成本地 AI 服务，提供实时翻译、语音识别和智能文本处理功能，支持 5 种主要语言。

## 🌍 多语言支持

FlowKey 支持全球使用最广泛的 5 种语言：

- 🇺🇸 **English** (默认)
- 🇨🇳 **中文** (Chinese)
- 🇪🇸 **Español** (Spanish)
- 🇮🇳 **हिन्दी** (Hindi)
- 🇸🇦 **العربية** (Arabic)

## ✨ 核心功能

### 🎯 完整翻译系统
- ✅ **划词翻译**: 带悬浮界面的即时文本翻译
- ✅ **快速翻译**: 三击空格键立即翻译
- ✅ **输入框翻译**: 输入框内直接文本替换
- ✅ **混合翻译**: 在线/本地/智能翻译模式
- ✅ **多语言支持**: 主要世界语言间无缝切换

### 🚀 完整 AI 集成
- ✅ **本地 AI 翻译**: MLX 驱动的离线翻译模型
- ✅ **语音识别**: 基于 Whisper 的语音听写和命令
- ✅ **智能文本检测**: 上下文感知的文本分析和建议
- ✅ **智能推荐**: AI 驱动的上下文建议
- ✅ **知识库**: 个人文档的语义搜索

### 🎙️ 语音命令系统
- ✅ **16 种内置命令**: 翻译、插入、搜索、系统命令
- ✅ **自定义语音命令**: 创建个性化语音命令
- ✅ **全局热键**: Command+Shift+V 语音激活
- ✅ **实时反馈**: 可视化波形和状态指示器
- ✅ **多语言识别**: 支持中文、英文、日文、韩文

### 📚 智能文本处理
- ✅ **智能重写**: 风格转换和语法纠错
- ✅ **模板系统**: 完整的文档模板管理
- ✅ **常用语管理**: 快速常用语插入和管理
- ✅ **文本风格转换**: 专业术语优化
- ✅ **用户习惯学习**: 智能学习用户偏好

### 🔒 隐私与安全
- ✅ **端到端加密**: 完整的隐私保护机制
- ✅ **本地优先处理**: 所有 AI 处理都在设备上进行
- ✅ **数据备份**: 自动备份和恢复系统
- ✅ **安全云同步**: 带冲突解决的 iCloud 同步
- ✅ **访问控制**: 细粒度权限管理

### 🌐 云端与同步
- ✅ **iCloud 集成**: 跨设备数据同步
- ✅ **离线模式支持**: 无网络连接时完整功能
- ✅ **同步冲突解决**: 智能冲突处理
- ✅ **实时同步**: 所有设备即时更新
- ✅ **数据一致性**: 跨平台确保数据完整性

## 🏗️ 架构

### 技术栈
- **Swift + SwiftUI**: 原生 macOS 开发
- **MLX Swift**: 为 Apple Silicon 优化的本地 AI 推理
- **IMKInputMethod**: 官方 macOS 输入法框架
- **Core Data**: 强大的本地数据持久化
- **iCloud 同步**: 跨设备无缝同步

### 项目结构
```
FlowKey/
├── Sources/FlowKey/
│   ├── App/                    # 应用程序入口点
│   ├── InputMethod/           # 输入法核心功能
│   ├── Models/                # 数据模型和服务
│   ├── Services/              # 业务逻辑层
│   ├── Views/                 # 用户界面
│   └── Resources/             # 资源和素材
├── Sources/FlowKeyTests/      # 测试套件
└── Documentation/             # 项目文档
```

## 🚀 快速开始

### 系统要求
- macOS 14.0 或更高版本
- Xcode 15.0 或更高版本
- Swift 5.9 或更高版本
- 推荐 Apple Silicon Mac 以获得最佳 AI 功能

### 快速启动

1. **克隆仓库**
```bash
git clone <repository-url>
cd flow-key
```

2. **构建应用程序**
```bash
# 开发构建
swift build

# 发布构建
swift build -c release
```

3. **运行应用程序**
```bash
# 开发模式
swift run

# 或使用构建脚本
./run_app.sh
```

### 安装

1. **复制到应用程序文件夹**
```bash
cp -r .build/debug/FlowKey.app /Applications/
```

2. **启用输入法**
   - 打开系统设置 > 键盘 > 输入法
   - 点击 "+" 添加新的输入源
   - 从列表中选择 "FlowKey"
   - 在您的输入源中启用它

## 🎯 使用指南

### 基础翻译
1. 在任何应用程序中选择文本
2. 翻译会自动出现在悬浮窗口中
3. 使用复制按钮保存结果

### 快捷操作
- **三击空格**: 立即翻译当前选中的文本
- **Cmd+Shift+T**: 手动触发翻译
- **Cmd+Shift+V**: 激活语音输入

### 语音功能
1. 在设置中启用语音识别
2. 点击麦克风按钮或使用语音快捷键
3. 自然说话 - 文本会被转录和翻译
4. 结果会立即显示并提供复制选项

### 语言切换
1. 打开 FlowKey 设置
2. 导航到"应用语言"部分
3. 从下拉菜单中选择您偏好的语言
4. 界面会立即更新，完全本地化

## 🔧 开发

### 开发环境设置
```bash
# 安装依赖
swift package update

# 生成 Xcode 项目
swift package generate-xcodeproj

# 运行测试
swift test

# 构建发布版本
swift build -c release
```

### 核心组件

#### 输入法核心
- `FlowInputController.swift`: 处理用户输入和文本处理
- `FlowInputMethod.swift`: 主要输入法类和系统注册
- `FlowCandidateView.swift`: 候选选择界面

#### AI 服务
- `MLXService.swift`: 本地 AI 模型集成
- `AIService.swift`: 统一 AI 服务接口
- `SpeechRecognizer.swift`: 语音识别功能

#### 本地化
- `LocalizationService.swift`: 多语言支持系统
- 支持 5 种主要语言，实时切换
- 完整的 UI 本地化和用户偏好持久化

### 构建分发版本
```bash
# 构建发布版本
swift build -c release

# 创建应用包
mkdir -p FlowKey.app/Contents/MacOS
cp .build/release/FlowKey FlowKey.app/Contents/MacOS/

# 签名应用（分发必需）
codesign --deep --force --verify --verbose --sign "-" FlowKey.app
```

## 🤝 贡献

我们欢迎贡献！请按照以下步骤：

1. **Fork 仓库**
2. **创建功能分支** (`git checkout -b feature/新功能`)
3. **提交更改** (`git commit -m '添加新功能'`)
4. **推送到分支** (`git push origin feature/新功能`)
5. **打开 Pull Request`

### 开发指南
- 遵循 Swift 编码规范
- 为新功能添加测试
- 更新文档
- 提交前确保所有测试通过

## ❓ 常见问题

### Q: 如何启用输入法？
A: 将应用复制到应用程序文件夹，然后转到系统设置 > 键盘 > 输入法，点击 "+" 并选择 "FlowKey"。

### Q: 翻译功能不工作？
A: 检查您的网络连接以进行在线翻译，或确保已下载本地 AI 模型以进行离线模式。

### Q: 语音识别不工作？
A: 在系统设置 > 隐私与安全性 > 麦克风中授予麦克风权限，并确保已下载语音模型。

### Q: 如何更改界面语言？
A: 打开 FlowKey 设置，转到"应用语言"，从下拉菜单中选择您偏好的语言。

## 📋 更新日志

### v1.0.0 (2025-08-23) - **100% 完整实现**
#### 🎯 第一阶段：核心基础 (100% 完成)
- ✅ **输入法框架**: 完整的 IMKInputMethod 集成
- ✅ **划词翻译**: 实时文本选择和翻译
- ✅ **快速翻译**: 三击空格即时翻译
- ✅ **数据存储**: 带加密的 Core Data 模型
- ✅ **输入框翻译**: 直接文本替换功能

#### 🚀 第二阶段：AI 集成 (100% 完成)
- ✅ **本地 AI 翻译**: MLX 驱动的离线翻译模型
- ✅ **知识库系统**: 带语义搜索的向量数据库
- ✅ **语音识别**: 基于 Whisper 的语音处理
- ✅ **智能文本检测**: 上下文感知的文本分析
- ✅ **翻译质量优化**: 持续学习系统

#### 🌐 第三阶段：云端和效率提升 (100% 完成)
- ✅ **iCloud 集成**: 跨设备数据同步
- ✅ **语音命令系统**: 16 种内置命令和自定义支持
- ✅ **智能文本处理**: 风格转换和语法纠错
- ✅ **模板系统**: 完整的文档模板管理
- ✅ **常用语管理**: 快速常用语插入和组织

#### 🔒 安全与隐私 (100% 完成)
- ✅ **端到端加密**: 完整的数据保护
- ✅ **隐私优先架构**: 所有处理在设备上进行
- ✅ **数据备份系统**: 自动备份和恢复
- ✅ **访问控制**: 细粒度权限管理

#### 🌍 多语言支持 (100% 完成)
- ✅ **5 种主要语言**: 英语、中文、西班牙语、印地语、阿拉伯语
- ✅ **实时语言切换**: 即时界面本地化
- ✅ **完整 UI 翻译**: 所有界面元素都已本地化
- ✅ **用户偏好持久化**: 语言设置自动保存

### ✨ 项目状态：**100% 完成**
所有计划功能已成功实现并测试。FlowKey 现在是一个功能齐全的智能输入法，具有全面的 AI 能力。

## 📄 许可证

本项目基于 MIT 许可证。详情请参见 [LICENSE](LICENSE)。

## 📞 联系方式

- **问题反馈**: [GitHub Issues](https://github.com/zh30/flow-key/issues)
- **功能讨论**: [GitHub Discussions](https://github.com/zh30/flow-key/discussions)
- **邮箱**: hello@zhanghe.dev
- **网站**: [zhanghe.dev](https://zhanghe.dev)

---

**FlowKey** — 更智能地输入。更好地沟通。🚀

